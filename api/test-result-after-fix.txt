
> api@1.0.0 test
> jest

PASS src/domain/entities/process-template.spec.ts (79.955 s)
PASS src/domain/services/business-day.service.spec.ts (80.398 s)
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays: startDate=2024-01-01T00:00:00.000Z, businessDays=5, countryCode=JP[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays result: 2024-01-08T00:00:00.000Z[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays: startDate=2024-01-08T00:00:00.000Z, businessDays=-5, countryCode=JP[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays result: 2024-01-01T00:00:00.000Z[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays: startDate=2024-01-01T00:00:00.000Z, businessDays=2, countryCode=JP[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays result: 2024-01-04T00:00:00.000Z[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95madjustToBusinessDay: date=2024-01-06T00:00:00.000Z, direction=forward[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays: startDate=2024-01-06T00:00:00.000Z, businessDays=1, countryCode=JP[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays result: 2024-01-08T00:00:00.000Z[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95madjustToBusinessDay: date=2024-01-06T00:00:00.000Z, direction=backward[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays: startDate=2024-01-06T00:00:00.000Z, businessDays=-1, countryCode=JP[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95maddBusinessDays result: 2024-01-05T00:00:00.000Z[39m
[95m[Nest] 536117  - [39m08/16/2025, 5:00:53 PM [95m  DEBUG[39m [38;5;3m[BusinessDayService] [39m[95madjustToBusinessDay: date=2024-01-03T00:00:00.000Z, direction=forward[39m
FAIL src/domain/entities/step-instance.spec.ts
  ‚óè Test suite failed to run

    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m9[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m  9[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m 10[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 19[0m         new Date('2025-01-01'),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m 20[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m32[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 32[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m 33[0m         null,
    [7m   [0m [91m~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 42[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 43[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m53[0m:[93m31[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 53[0m       const pendingInstance = new StepInstance(
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~[0m
    [7m 54[0m         1, 100, 10, 'Pending Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 60[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 61[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m64[0m:[93m34[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 64[0m       const inProgressInstance = new StepInstance(
    [7m   [0m [91m                                 ~~~~~~~~~~~~~~~~~[0m
    [7m 65[0m         2, 100, 11, 'In Progress Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 71[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 72[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m75[0m:[93m33[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 75[0m       const completedInstance = new StepInstance(
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m
    [7m 76[0m         3, 100, 12, 'Completed Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 82[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 83[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m89[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 89[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m 90[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 96[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 97[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m107[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m107[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m108[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m114[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m115[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m123[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m123[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m124[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m130[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m131[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m139[0m:[93m30[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m139[0m       const lockedInstance = new StepInstance(
    [7m   [0m [91m                             ~~~~~~~~~~~~~~~~~[0m
    [7m140[0m         1, 100, 10, 'Locked Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m146[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m147[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m153[0m:[93m32[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m153[0m       const unlockedInstance = new StepInstance(
    [7m   [0m [91m                               ~~~~~~~~~~~~~~~~~[0m
    [7m154[0m         1, 100, 10, 'Unlocked Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m160[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m161[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m170[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m170[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m171[0m         1, 100, 10, 'Overdue Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m177[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m178[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m184[0m:[93m31[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m184[0m       const unlockedPending = new StepInstance(
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~[0m
    [7m185[0m         1, 100, 10, 'Modifiable Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m191[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m192[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m194[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m194[0m       const lockedPending = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m195[0m         2, 100, 11, 'Locked Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m201[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m202[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m204[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m204[0m       const completedStep = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m205[0m         3, 100, 12, 'Completed Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m211[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m212[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m228[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m228[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m229[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m235[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m236[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m254[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m254[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m255[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m261[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m262[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m271[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m271[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m272[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m278[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m279[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m291[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m291[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m292[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m298[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m299[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.

[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31m[test-request-id] Internal Server Error[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mError: Something went wrong
    at Object.<anonymous> (/mnt/c/work/git2/process-todo/api/src/common/filters/global-exception.filter.spec.ts:83:25)
    at Promise.finally.completed (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/mnt/c/work/git2/process-todo/api/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/mnt/c/work/git2/process-todo/api/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/mnt/c/work/git2/process-todo/api/node_modules/jest-runner/build/testWorker.js:497:12)[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 500,
  "timestamp": "2025-08-16T08:00:59.594Z"
}

[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31m[test-request-id] Internal Server Error[39m
[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33m[test-request-id] Client Error: HttpException: Test error[39m
[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 400,
  "timestamp": "2025-08-16T08:00:59.584Z"
}

[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33m[test-request-id] Client Error: HttpException: Http Exception[39m
[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 400,
  "timestamp": "2025-08-16T08:00:59.591Z"
}

[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mError: Database connection failed: password=secret123
    at Object.<anonymous> (/mnt/c/work/git2/process-todo/api/src/common/filters/global-exception.filter.spec.ts:98:25)
    at Promise.finally.completed (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/mnt/c/work/git2/process-todo/api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/mnt/c/work/git2/process-todo/api/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/mnt/c/work/git2/process-todo/api/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/mnt/c/work/git2/process-todo/api/node_modules/jest-runner/build/testWorker.js:497:12)[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 500,
  "timestamp": "2025-08-16T08:00:59.684Z"
}

[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31m[test-request-id] Internal Server Error[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mError: Test error
    at TestFile.js:10:5[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 500,
  "timestamp": "2025-08-16T08:00:59.688Z"
}

[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31m[test-request-id] Internal Server Error[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mError: Test error
    at TestFile.js:10:5[39m
[31m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 500,
  "timestamp": "2025-08-16T08:00:59.690Z"
}

FAIL src/common/filters/global-exception.filter.spec.ts (86.101 s)
  ‚óè GlobalExceptionFilter ‚Ä∫ catch ‚Ä∫ should handle rate limit errors

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"errorCode": "RATE_LIMIT_ERROR", "message": "Too Many Requests", "statusCode": 429}
    Received: {"message": "Too Many Requests", "method": "GET", "path": "/api/test", "requestId": "test-request-id", "statusCode": 429, "timestamp": "2025-08-16T08:00:59.694Z"}

    Number of calls: 1

      184 |
      185 |       expect(mockResponse.status).toHaveBeenCalledWith(HttpStatus.TOO_MANY_REQUESTS);
    > 186 |       expect(mockResponse.json).toHaveBeenCalledWith(
          |                                 ^
      187 |         expect.objectContaining({
      188 |           statusCode: HttpStatus.TOO_MANY_REQUESTS,
      189 |           message: 'Too Many Requests',

      at Object.<anonymous> (common/filters/global-exception.filter.spec.ts:186:33)

[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33m[err_1755331259691_9ao4qx0u8] Client Error: HttpException: Test error[39m
[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33mObject:[39m
{
  "requestId": "err_1755331259691_9ao4qx0u8",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 400,
  "timestamp": "2025-08-16T08:00:59.691Z"
}

[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33m[test-request-id] Client Error: [object Object][39m
[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 409,
  "timestamp": "2025-08-16T08:00:59.693Z"
}

[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33m[test-request-id] Client Error: HttpException: Too Many Requests[39m
[33m[Nest] 536061  - [39m08/16/2025, 5:00:59 PM [33m   WARN[39m [38;5;3m[GlobalExceptionFilter] [39m[33mObject:[39m
{
  "requestId": "test-request-id",
  "url": "/api/test",
  "method": "GET",
  "ip": "127.0.0.1",
  "userAgent": "test-agent",
  "statusCode": 429,
  "timestamp": "2025-08-16T08:00:59.694Z"
}

FAIL src/domain/entities/case.spec.ts
  ‚óè Test suite failed to run

    [96msrc/domain/entities/case.spec.ts[0m:[93m44[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 44[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m 45[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 54[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 55[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m57[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 57[0m       const step2 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m 58[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 67[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 68[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m78[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 78[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m 79[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 88[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 89[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m100[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m100[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m101[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m110[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m111[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m113[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m113[0m       const step2 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m114[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m123[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m124[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m126[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m126[0m       const step3 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m127[0m         3,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m136[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m137[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m149[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m149[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m150[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m159[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m160[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m162[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m162[0m       const step2 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m163[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m172[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m173[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m189[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m189[0m       const delayedStep = new StepInstance(
    [7m   [0m [91m                          ~~~~~~~~~~~~~~~~~[0m
    [7m190[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m199[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m200[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m202[0m:[93m26[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m202[0m       const onTimeStep = new StepInstance(
    [7m   [0m [91m                         ~~~~~~~~~~~~~~~~~[0m
    [7m203[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m212[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m213[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m215[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m215[0m       const completedStep = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m216[0m         3,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m225[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m226[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m244[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m244[0m       const upcomingStep = new StepInstance(
    [7m   [0m [91m                           ~~~~~~~~~~~~~~~~~[0m
    [7m245[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m254[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m255[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m257[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m257[0m       const farFutureStep = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m258[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m267[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m268[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.

PASS src/domain/entities/step-template.spec.ts (89.192 s)
[31m[Nest] 536071  - [39m08/16/2025, 5:01:09 PM [31m  ERROR[39m [38;5;3m[RealtimeGateway] [39m[31mError joining room: Join failed[39m
PASS src/infrastructure/gateways/realtime.gateway.spec.ts (95.626 s)
PASS src/infrastructure/auth/jwt.strategy.spec.ts (96.877 s)
PASS src/application/usecases/case/create-case.usecase.spec.ts (98.481 s)
  ‚óè Console

    console.log
      Schedule Plan: [
        {
          id: 1,
          name: 'Step 1',
          startDate: 2024-12-04T00:00:00.000Z,
          dueDate: 2024-12-17T00:00:00.000Z
        },
        {
          id: 2,
          name: 'Step 2',
          startDate: 2024-12-18T00:00:00.000Z,
          dueDate: 2024-12-24T00:00:00.000Z
        }
      ]

      at CreateCaseUseCase.execute (application/usecases/case/create-case.usecase.ts:57:13)

    console.log
      Creating step instance for Step 1 with start: Wed Dec 04 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Tue Dec 17 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-12-04T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Creating step instance for Step 2 with start: Wed Dec 18 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Tue Dec 24 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-12-18T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Schedule Plan: [
        {
          id: 1,
          name: 'Step 1',
          startDate: 2024-12-02T00:00:00.000Z,
          dueDate: 2024-12-13T00:00:00.000Z
        }
      ]

      at CreateCaseUseCase.execute (application/usecases/case/create-case.usecase.ts:57:13)

    console.log
      Creating step instance for Step 1 with start: Mon Dec 02 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Fri Dec 13 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-12-02T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Schedule Plan: [
        {
          id: 1,
          name: 'Step 1',
          startDate: 2024-11-20T00:00:00.000Z,
          dueDate: 2024-12-10T00:00:00.000Z
        },
        {
          id: 2,
          name: 'Step 2',
          startDate: 2024-12-11T00:00:00.000Z,
          dueDate: 2024-12-17T00:00:00.000Z
        },
        {
          id: 3,
          name: 'Step 3',
          startDate: 2024-12-18T00:00:00.000Z,
          dueDate: 2024-12-20T00:00:00.000Z
        }
      ]

      at CreateCaseUseCase.execute (application/usecases/case/create-case.usecase.ts:57:13)

    console.log
      Creating step instance for Step 1 with start: Wed Nov 20 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Tue Dec 10 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-11-20T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Creating step instance for Step 2 with start: Wed Dec 11 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Tue Dec 17 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-12-11T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Creating step instance for Step 3 with start: Wed Dec 18 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Fri Dec 20 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-12-18T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Schedule Plan: [
        {
          id: 1,
          name: 'Step 1',
          startDate: 2024-12-04T00:00:00.000Z,
          dueDate: 2024-12-17T00:00:00.000Z
        }
      ]

      at CreateCaseUseCase.execute (application/usecases/case/create-case.usecase.ts:57:13)

    console.log
      Creating step instance for Step 1 with start: Wed Dec 04 2024 09:00:00 GMT+0900 (Japan Standard Time), due: Tue Dec 17 2024 09:00:00 GMT+0900 (Japan Standard Time)

      at application/usecases/case/create-case.usecase.ts:66:17
          at Array.map (<anonymous>)

    console.log
        Created instance - Has start date? true

      at application/usecases/case/create-case.usecase.ts:80:17
          at Array.map (<anonymous>)

    console.log
        Start date value: 2024-12-04T00:00:00.000Z

      at application/usecases/case/create-case.usecase.ts:82:19
          at Array.map (<anonymous>)

    console.log
      Schedule Plan: []

      at CreateCaseUseCase.execute (application/usecases/case/create-case.usecase.ts:57:13)

PASS src/infrastructure/auth/guards/roles.guard.spec.ts (101.071 s)
PASS src/infrastructure/auth/guards/permissions.guard.spec.ts (102.822 s)
PASS src/infrastructure/auth/auth.service.spec.ts (108.305 s)
PASS src/interfaces/controllers/auth/auth.controller.spec.ts (116.179 s)
FAIL src/interfaces/controllers/step/step.controller.spec.ts (38.492 s)
  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should update multiple steps successfully

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should skip non-existent steps

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should unlock steps when locked is false

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should handle null assigneeId

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

PASS src/application/dto/process-template/create-step-template.dto.spec.ts (119.908 s)
FAIL src/interfaces/controllers/case/case.controller.spec.ts (123.258 s)
  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should update multiple cases successfully

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should skip non-existent cases

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkDelete ‚Ä∫ should delete multiple cases successfully

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkDelete ‚Ä∫ should handle delete errors gracefully

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

FAIL src/interfaces/controllers/step/step.controller.simple.spec.ts (123.073 s)
  ‚óè StepController Unit Tests ‚Ä∫ assignTo ‚Ä∫ should assign a user to a step

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"assigneeId": 2, "stepId": 1}
    Received: 1, {"assigneeId": 2}

    Number of calls: 1

      112 |       const result = await controller.assignTo(stepId, { assigneeId });
      113 |
    > 114 |       expect(assignStepToUserUseCase.execute).toHaveBeenCalledWith({ stepId, assigneeId });
          |                                               ^
      115 |       expect(result).toHaveProperty('id', 1);
      116 |       expect(result).toHaveProperty('assigneeId', assigneeId);
      117 |     });

      at Object.<anonymous> (interfaces/controllers/step/step.controller.simple.spec.ts:114:47)

  ‚óè StepController Unit Tests ‚Ä∫ assignTo ‚Ä∫ should unassign a user when assigneeId is null

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"assigneeId": null, "stepId": 1}
    Received: 1, {"assigneeId": null}

    Number of calls: 1

      125 |       const result = await controller.assignTo(stepId, { assigneeId: null });
      126 |
    > 127 |       expect(assignStepToUserUseCase.execute).toHaveBeenCalledWith({ stepId, assigneeId: null });
          |                                               ^
      128 |       expect(result).toHaveProperty('assigneeId', null);
      129 |     });
      130 |

      at Object.<anonymous> (interfaces/controllers/step/step.controller.simple.spec.ts:127:47)

[31m[Nest] 536112  - [39m08/16/2025, 5:01:47 PM [31m  ERROR[39m [38;5;3m[ReplanDomainService] [39m[31mDependency 999 not found for template 1:Invalid Step[39m
[31m[Nest] 536112  - [39m08/16/2025, 5:01:47 PM [31m  ERROR[39m [38;5;3m[ReplanDomainService] [39m[31mAvailable template IDs: 1[39m
PASS src/domain/services/replan-domain.service.spec.ts (130.197 s)
  ‚óè Console

    console.log
      Step 1:„É™„Éº„ÉâÁç≤Âæó -> 2025-12-01T00:00:00.000Z

      at Object.<anonymous> (domain/services/replan-domain.service.spec.ts:158:17)

    console.log
      Step 2:ÂàùÂõû„Ç≥„É≥„Çø„ÇØ„Éà -> 2025-12-03T00:00:00.000Z

      at Object.<anonymous> (domain/services/replan-domain.service.spec.ts:158:17)

    console.log
      Step 3:„Éí„Ç¢„É™„É≥„Ç∞Èù¢Ë´á -> 2025-12-06T00:00:00.000Z

      at Object.<anonymous> (domain/services/replan-domain.service.spec.ts:158:17)

PASS src/application/dto/process-template/create-process-template.dto.spec.ts (137.093 s)
FAIL src/interfaces/controllers/comment/comment.controller.integration.spec.ts (138.962 s)
  ‚óè Console

    console.log
      prisma:error 
      Invalid `prisma.processTemplate.deleteMany()` invocation in
      /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34
      
        42 await prisma.user.deleteMany({
        43   where: { email: { startsWith: 'test.comment.' } }
        44 });
      ‚Üí 45 await prisma.processTemplate.deleteMany(
      Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      at Object.rp (../node_modules/@prisma/internals/src/logger.ts:13:11)

    console.log
      prisma:error 
      Invalid `prisma.processTemplate.deleteMany()` invocation in
      /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:126:34
      
        123 await prisma.user.deleteMany({
        124   where: { email: { startsWith: 'test.comment.' } }
        125 });
      ‚Üí 126 await prisma.processTemplate.deleteMany(
      Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      at Object.rp (../node_modules/@prisma/internals/src/logger.ts:13:11)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ POST /comments ‚Ä∫ should create a new comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ POST /comments ‚Ä∫ should fail with invalid step ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ POST /comments ‚Ä∫ should fail with empty content

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ GET /comments/steps/:stepId ‚Ä∫ should retrieve all comments for a step

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ GET /comments/steps/:stepId ‚Ä∫ should return empty array for step with no comments

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ PUT /comments/:id ‚Ä∫ should update a comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ PUT /comments/:id ‚Ä∫ should fail to update non-existent comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ DELETE /comments/:id ‚Ä∫ should delete a comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ DELETE /comments/:id ‚Ä∫ should fail to delete non-existent comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ Comment workflow integration ‚Ä∫ should handle complete comment workflow with replies

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:126:34

      123 await prisma.user.deleteMany({
      124   where: { email: { startsWith: 'test.comment.' } }
      125 });
    ‚Üí 126 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      124 |       where: { email: { startsWith: 'test.comment.' } }
      125 |     });
    > 126 |     await prisma.processTemplate.deleteMany({
          |     ^
      127 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      128 |     });
      129 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:126:5)

FAIL src/interfaces/controllers/kanban/kanban.controller.integration.spec.ts (142.777 s)
  ‚óè Console

    console.log
      prisma:error 
      Invalid `prisma.processTemplate.deleteMany()` invocation in
      /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/kanban/kanban.controller.integration.spec.ts:147:34
      
        144 await prisma.user.deleteMany({
        145   where: { email: { startsWith: 'test.kanban.' } }
        146 });
      ‚Üí 147 await prisma.processTemplate.deleteMany(
      Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      at Object.rp (../node_modules/@prisma/internals/src/logger.ts:13:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should retrieve kanban board with all columns

    expected 200 "OK", got 404 "Not Found"

      156 |       const response = await request(app.getHttpServer())
      157 |         .get('/api/kanban/board')
    > 158 |         .expect(200);
          |          ^
      159 |
      160 |       expect(response.body).toHaveProperty('columns');
      161 |       expect(response.body).toHaveProperty('users');

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:158:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should filter by assignee

    expected 200 "OK", got 404 "Not Found"

      174 |       const response = await request(app.getHttpServer())
      175 |         .get(`/api/kanban/board?assigneeId=${testAssigneeId}`)
    > 176 |         .expect(200);
          |          ^
      177 |
      178 |       // Check that all items in all columns have the correct assignee
      179 |       for (const column of response.body.columns) {

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:176:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should filter by case

    expected 200 "OK", got 404 "Not Found"

      189 |       const response = await request(app.getHttpServer())
      190 |         .get(`/api/kanban/board?caseId=${testCaseId}`)
    > 191 |         .expect(200);
          |          ^
      192 |
      193 |       // Check that all items belong to the correct case
      194 |       for (const column of response.body.columns) {

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:191:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should filter by status

    expected 200 "OK", got 404 "Not Found"

      202 |       const response = await request(app.getHttpServer())
      203 |         .get('/api/kanban/board?status=todo&status=done')
    > 204 |         .expect(200);
          |          ^
      205 |
      206 |       // Check that only todo and done items are returned
      207 |       const allItems: any[] = [];

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:204:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should include user list

    expected 200 "OK", got 404 "Not Found"

      218 |       const response = await request(app.getHttpServer())
      219 |         .get('/api/kanban/board')
    > 220 |         .expect(200);
          |          ^
      221 |
      222 |       expect(response.body.users).toBeInstanceOf(Array);
      223 |       const testUser = response.body.users.find((u: any) => u.id === testAssigneeId);

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:220:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should calculate correct statistics

    expected 200 "OK", got 404 "Not Found"

      229 |       const response = await request(app.getHttpServer())
      230 |         .get('/api/kanban/board')
    > 231 |         .expect(200);
          |          ^
      232 |
      233 |       const { stats } = response.body;
      234 |       expect(stats).toHaveProperty('total');

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:231:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban drag-and-drop workflow ‚Ä∫ should handle complete drag-and-drop workflow

    expected 200 "OK", got 404 "Not Found"

      254 |       const initialBoard = await request(app.getHttpServer())
      255 |         .get('/api/kanban/board')
    > 256 |         .expect(200);
          |          ^
      257 |
      258 |       const initialTodoItems = initialBoard.body.columns.find((c: any) => c.id === 'todo').items;
      259 |       const initialInProgressItems = initialBoard.body.columns.find((c: any) => c.id === 'in_progress').items;

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:256:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban drag-and-drop workflow ‚Ä∫ should enforce WIP limits

    expected 200 "OK", got 404 "Not Found"

      304 |       const response = await request(app.getHttpServer())
      305 |         .get('/api/kanban/board')
    > 306 |         .expect(200);
          |          ^
      307 |
      308 |       // Check that columns have WIP limits defined
      309 |       const inProgressColumn = response.body.columns.find((c: any) => c.id === 'in_progress');

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:306:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban drag-and-drop workflow ‚Ä∫ should handle blocked status correctly

    expected 200 "OK", got 404 "Not Found"

      319 |         .put(`/api/steps/${stepId}/status`)
      320 |         .send({ status: 'blocked' })
    > 321 |         .expect(200);
          |          ^
      322 |
      323 |       // Get kanban board
      324 |       const response = await request(app.getHttpServer())

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:321:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban with multiple users ‚Ä∫ should show assignee names correctly

    expected 200 "OK", got 404 "Not Found"

      338 |       const response = await request(app.getHttpServer())
      339 |         .get('/api/kanban/board')
    > 340 |         .expect(200);
          |          ^
      341 |
      342 |       // Find items with assignees
      343 |       const itemsWithAssignees: any[] = [];

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:340:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban with multiple users ‚Ä∫ should support filtering by multiple assignees

    expected 200 "OK", got 404 "Not Found"

      374 |       const response = await request(app.getHttpServer())
      375 |         .get(`/api/kanban/board?assigneeId=${anotherUser.id}`)
    > 376 |         .expect(200);
          |          ^
      377 |
      378 |       // Verify filtering works
      379 |       let foundCount = 0;

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:376:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/kanban/kanban.controller.integration.spec.ts:147:34

      144 await prisma.user.deleteMany({
      145   where: { email: { startsWith: 'test.kanban.' } }
      146 });
    ‚Üí 147 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      145 |       where: { email: { startsWith: 'test.kanban.' } }
      146 |     });
    > 147 |     await prisma.processTemplate.deleteMany({
          |     ^
      148 |       where: { name: { startsWith: 'TEST_KANBAN_TEMPLATE' } }
      149 |     });
      150 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:147:5)

FAIL src/interfaces/controllers/step/step.controller.integration.spec.ts (149.571 s)
  ‚óè Console

    console.log
      prisma:error 
      Invalid `prisma.processTemplate.deleteMany()` invocation in
      /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34
      
        32 await prisma.user.deleteMany({
        33   where: { email: { startsWith: 'test.assignee.' } }
        34 });
      ‚Üí 35 await prisma.processTemplate.deleteMany(
      Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      at Object.rp (../node_modules/@prisma/internals/src/logger.ts:13:11)

    console.log
      prisma:error 
      Invalid `prisma.processTemplate.deleteMany()` invocation in
      /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:123:34
      
        120 await prisma.user.deleteMany({
        121   where: { email: { startsWith: 'test.' } }
        122 });
      ‚Üí 123 await prisma.processTemplate.deleteMany(
      Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      at Object.rp (../node_modules/@prisma/internals/src/logger.ts:13:11)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should assign a user to a step

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should unassign a user from a step

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should fail with invalid step ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should fail with invalid assignee ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should fail when step is locked

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ Assignee workflow integration ‚Ä∫ should handle complete assignee workflow

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ Assignee workflow integration ‚Ä∫ should support reassignment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:123:34

      120 await prisma.user.deleteMany({
      121   where: { email: { startsWith: 'test.' } }
      122 });
    ‚Üí 123 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      121 |       where: { email: { startsWith: 'test.' } }
      122 |     });
    > 123 |     await prisma.processTemplate.deleteMany({
          |     ^
      124 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      125 |     });
      126 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:123:5)

Summary of all failing tests
FAIL domain/entities/step-instance.spec.ts
  ‚óè Test suite failed to run

    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m9[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m  9[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m 10[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 19[0m         new Date('2025-01-01'),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m 20[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m32[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 32[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m 33[0m         null,
    [7m   [0m [91m~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 42[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 43[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m53[0m:[93m31[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 53[0m       const pendingInstance = new StepInstance(
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~[0m
    [7m 54[0m         1, 100, 10, 'Pending Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 60[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 61[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m64[0m:[93m34[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 64[0m       const inProgressInstance = new StepInstance(
    [7m   [0m [91m                                 ~~~~~~~~~~~~~~~~~[0m
    [7m 65[0m         2, 100, 11, 'In Progress Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 71[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 72[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m75[0m:[93m33[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 75[0m       const completedInstance = new StepInstance(
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m
    [7m 76[0m         3, 100, 12, 'Completed Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 82[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 83[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m89[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 89[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m 90[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 96[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 97[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m107[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m107[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m108[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m114[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m115[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m123[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m123[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m124[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m130[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m131[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m139[0m:[93m30[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m139[0m       const lockedInstance = new StepInstance(
    [7m   [0m [91m                             ~~~~~~~~~~~~~~~~~[0m
    [7m140[0m         1, 100, 10, 'Locked Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m146[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m147[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m153[0m:[93m32[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m153[0m       const unlockedInstance = new StepInstance(
    [7m   [0m [91m                               ~~~~~~~~~~~~~~~~~[0m
    [7m154[0m         1, 100, 10, 'Unlocked Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m160[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m161[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m170[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m170[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m171[0m         1, 100, 10, 'Overdue Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m177[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m178[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m184[0m:[93m31[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m184[0m       const unlockedPending = new StepInstance(
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~[0m
    [7m185[0m         1, 100, 10, 'Modifiable Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m191[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m192[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m194[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m194[0m       const lockedPending = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m195[0m         2, 100, 11, 'Locked Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m201[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m202[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m204[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m204[0m       const completedStep = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m205[0m         3, 100, 12, 'Completed Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m211[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m212[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m228[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m228[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m229[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m235[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m236[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m254[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m254[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m255[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m261[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m262[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m271[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m271[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m272[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m278[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m279[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/step-instance.spec.ts[0m:[93m291[0m:[93m24[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m291[0m       const instance = new StepInstance(
    [7m   [0m [91m                       ~~~~~~~~~~~~~~~~~[0m
    [7m292[0m         1, 100, 10, 'Test Step',
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m298[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m299[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.

FAIL common/filters/global-exception.filter.spec.ts (86.101 s)
  ‚óè GlobalExceptionFilter ‚Ä∫ catch ‚Ä∫ should handle rate limit errors

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"errorCode": "RATE_LIMIT_ERROR", "message": "Too Many Requests", "statusCode": 429}
    Received: {"message": "Too Many Requests", "method": "GET", "path": "/api/test", "requestId": "test-request-id", "statusCode": 429, "timestamp": "2025-08-16T08:00:59.694Z"}

    Number of calls: 1

      184 |
      185 |       expect(mockResponse.status).toHaveBeenCalledWith(HttpStatus.TOO_MANY_REQUESTS);
    > 186 |       expect(mockResponse.json).toHaveBeenCalledWith(
          |                                 ^
      187 |         expect.objectContaining({
      188 |           statusCode: HttpStatus.TOO_MANY_REQUESTS,
      189 |           message: 'Too Many Requests',

      at Object.<anonymous> (common/filters/global-exception.filter.spec.ts:186:33)

FAIL domain/entities/case.spec.ts
  ‚óè Test suite failed to run

    [96msrc/domain/entities/case.spec.ts[0m:[93m44[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 44[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m 45[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 54[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 55[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m57[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 57[0m       const step2 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m 58[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 67[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 68[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m78[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m 78[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m 79[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m 88[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m 89[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m100[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m100[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m101[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m110[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m111[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m113[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m113[0m       const step2 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m114[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m123[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m124[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m126[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m126[0m       const step3 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m127[0m         3,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m136[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m137[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m149[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m149[0m       const step1 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m150[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m159[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m160[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m162[0m:[93m21[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m162[0m       const step2 = new StepInstance(
    [7m   [0m [91m                    ~~~~~~~~~~~~~~~~~[0m
    [7m163[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m172[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m173[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m189[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m189[0m       const delayedStep = new StepInstance(
    [7m   [0m [91m                          ~~~~~~~~~~~~~~~~~[0m
    [7m190[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m199[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m200[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m202[0m:[93m26[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m202[0m       const onTimeStep = new StepInstance(
    [7m   [0m [91m                         ~~~~~~~~~~~~~~~~~[0m
    [7m203[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m212[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m213[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m215[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m215[0m       const completedStep = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m216[0m         3,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m225[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m226[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m244[0m:[93m28[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m244[0m       const upcomingStep = new StepInstance(
    [7m   [0m [91m                           ~~~~~~~~~~~~~~~~~[0m
    [7m245[0m         1,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m254[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m255[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.
    [96msrc/domain/entities/case.spec.ts[0m:[93m257[0m:[93m29[0m - [91merror[0m[90m TS2554: [0mExpected 11 arguments, but got 10.

    [7m257[0m       const farFutureStep = new StepInstance(
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~[0m
    [7m258[0m         2,
    [7m   [0m [91m~~~~~~~~~~[0m
    [7m...[0m 
    [7m267[0m         new Date(),
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
    [7m268[0m       );
    [7m   [0m [91m~~~~~~~[0m

      [96msrc/domain/entities/step-instance.ts[0m:[93m22[0m:[93m5[0m
        [7m22[0m     private updatedAt: Date,
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'updatedAt' was not provided.

FAIL interfaces/controllers/step/step.controller.spec.ts (38.492 s)
  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should update multiple steps successfully

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should skip non-existent steps

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should unlock steps when locked is false

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

  ‚óè StepController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should handle null assigneeId

    Nest can't resolve dependencies of the StepController (?, UpdateStepStatusUseCase, AssignStepToUserUseCase, LockStepUseCase, UnlockStepUseCase, BulkUpdateStepsUseCase). Please make sure that the argument GetStepByIdUseCase at index [0] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If GetStepByIdUseCase is a provider, is it part of the current RootTestModule?
    - If GetStepByIdUseCase is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing GetStepByIdUseCase */ ]
      })

      29 |
      30 |   beforeEach(async () => {
    > 31 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      32 |       controllers: [StepController],
      33 |       providers: [
      34 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.spec.ts:31:35)

FAIL interfaces/controllers/case/case.controller.spec.ts (123.258 s)
  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should update multiple cases successfully

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkUpdate ‚Ä∫ should skip non-existent cases

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkDelete ‚Ä∫ should delete multiple cases successfully

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

  ‚óè CaseController - Bulk Operations ‚Ä∫ bulkDelete ‚Ä∫ should handle delete errors gracefully

    Nest can't resolve dependencies of the CaseController (CreateCaseUseCase, PreviewReplanUseCase, ApplyReplanUseCase, CaseRepository, ?). Please make sure that the argument RealtimeGateway at index [4] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If RealtimeGateway is a provider, is it part of the current RootTestModule?
    - If RealtimeGateway is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing RealtimeGateway */ ]
      })

      41 |
      42 |   beforeEach(async () => {
    > 43 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      44 |       controllers: [CaseController],
      45 |       providers: [
      46 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:262:19)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/core/injector/injector.js:215:33)
      at TestingInjector.resolveComponentInstance (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:129:38)
          at async Promise.all (index 4)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:144:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:89:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (interfaces/controllers/case/case.controller.spec.ts:43:35)

FAIL interfaces/controllers/step/step.controller.simple.spec.ts (123.073 s)
  ‚óè StepController Unit Tests ‚Ä∫ assignTo ‚Ä∫ should assign a user to a step

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"assigneeId": 2, "stepId": 1}
    Received: 1, {"assigneeId": 2}

    Number of calls: 1

      112 |       const result = await controller.assignTo(stepId, { assigneeId });
      113 |
    > 114 |       expect(assignStepToUserUseCase.execute).toHaveBeenCalledWith({ stepId, assigneeId });
          |                                               ^
      115 |       expect(result).toHaveProperty('id', 1);
      116 |       expect(result).toHaveProperty('assigneeId', assigneeId);
      117 |     });

      at Object.<anonymous> (interfaces/controllers/step/step.controller.simple.spec.ts:114:47)

  ‚óè StepController Unit Tests ‚Ä∫ assignTo ‚Ä∫ should unassign a user when assigneeId is null

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"assigneeId": null, "stepId": 1}
    Received: 1, {"assigneeId": null}

    Number of calls: 1

      125 |       const result = await controller.assignTo(stepId, { assigneeId: null });
      126 |
    > 127 |       expect(assignStepToUserUseCase.execute).toHaveBeenCalledWith({ stepId, assigneeId: null });
          |                                               ^
      128 |       expect(result).toHaveProperty('assigneeId', null);
      129 |     });
      130 |

      at Object.<anonymous> (interfaces/controllers/step/step.controller.simple.spec.ts:127:47)

FAIL interfaces/controllers/comment/comment.controller.integration.spec.ts (138.962 s)
  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ POST /comments ‚Ä∫ should create a new comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ POST /comments ‚Ä∫ should fail with invalid step ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ POST /comments ‚Ä∫ should fail with empty content

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ GET /comments/steps/:stepId ‚Ä∫ should retrieve all comments for a step

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ GET /comments/steps/:stepId ‚Ä∫ should return empty array for step with no comments

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ PUT /comments/:id ‚Ä∫ should update a comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ PUT /comments/:id ‚Ä∫ should fail to update non-existent comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ DELETE /comments/:id ‚Ä∫ should delete a comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ DELETE /comments/:id ‚Ä∫ should fail to delete non-existent comment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)

  ‚óè CommentController Integration Tests - Comment Flow ‚Ä∫ Comment workflow integration ‚Ä∫ should handle complete comment workflow with replies

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:45:34

      42 await prisma.user.deleteMany({
      43   where: { email: { startsWith: 'test.comment.' } }
      44 });
    ‚Üí 45 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      43 |       where: { email: { startsWith: 'test.comment.' } }
      44 |     });
    > 45 |     await prisma.processTemplate.deleteMany({
         |     ^
      46 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      47 |     });
      48 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:45:5)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/comment/comment.controller.integration.spec.ts:126:34

      123 await prisma.user.deleteMany({
      124   where: { email: { startsWith: 'test.comment.' } }
      125 });
    ‚Üí 126 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      124 |       where: { email: { startsWith: 'test.comment.' } }
      125 |     });
    > 126 |     await prisma.processTemplate.deleteMany({
          |     ^
      127 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      128 |     });
      129 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/comment/comment.controller.integration.spec.ts:126:5)

FAIL interfaces/controllers/kanban/kanban.controller.integration.spec.ts (142.777 s)
  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should retrieve kanban board with all columns

    expected 200 "OK", got 404 "Not Found"

      156 |       const response = await request(app.getHttpServer())
      157 |         .get('/api/kanban/board')
    > 158 |         .expect(200);
          |          ^
      159 |
      160 |       expect(response.body).toHaveProperty('columns');
      161 |       expect(response.body).toHaveProperty('users');

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:158:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should filter by assignee

    expected 200 "OK", got 404 "Not Found"

      174 |       const response = await request(app.getHttpServer())
      175 |         .get(`/api/kanban/board?assigneeId=${testAssigneeId}`)
    > 176 |         .expect(200);
          |          ^
      177 |
      178 |       // Check that all items in all columns have the correct assignee
      179 |       for (const column of response.body.columns) {

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:176:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should filter by case

    expected 200 "OK", got 404 "Not Found"

      189 |       const response = await request(app.getHttpServer())
      190 |         .get(`/api/kanban/board?caseId=${testCaseId}`)
    > 191 |         .expect(200);
          |          ^
      192 |
      193 |       // Check that all items belong to the correct case
      194 |       for (const column of response.body.columns) {

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:191:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should filter by status

    expected 200 "OK", got 404 "Not Found"

      202 |       const response = await request(app.getHttpServer())
      203 |         .get('/api/kanban/board?status=todo&status=done')
    > 204 |         .expect(200);
          |          ^
      205 |
      206 |       // Check that only todo and done items are returned
      207 |       const allItems: any[] = [];

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:204:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should include user list

    expected 200 "OK", got 404 "Not Found"

      218 |       const response = await request(app.getHttpServer())
      219 |         .get('/api/kanban/board')
    > 220 |         .expect(200);
          |          ^
      221 |
      222 |       expect(response.body.users).toBeInstanceOf(Array);
      223 |       const testUser = response.body.users.find((u: any) => u.id === testAssigneeId);

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:220:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ GET /kanban/board ‚Ä∫ should calculate correct statistics

    expected 200 "OK", got 404 "Not Found"

      229 |       const response = await request(app.getHttpServer())
      230 |         .get('/api/kanban/board')
    > 231 |         .expect(200);
          |          ^
      232 |
      233 |       const { stats } = response.body;
      234 |       expect(stats).toHaveProperty('total');

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:231:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban drag-and-drop workflow ‚Ä∫ should handle complete drag-and-drop workflow

    expected 200 "OK", got 404 "Not Found"

      254 |       const initialBoard = await request(app.getHttpServer())
      255 |         .get('/api/kanban/board')
    > 256 |         .expect(200);
          |          ^
      257 |
      258 |       const initialTodoItems = initialBoard.body.columns.find((c: any) => c.id === 'todo').items;
      259 |       const initialInProgressItems = initialBoard.body.columns.find((c: any) => c.id === 'in_progress').items;

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:256:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban drag-and-drop workflow ‚Ä∫ should enforce WIP limits

    expected 200 "OK", got 404 "Not Found"

      304 |       const response = await request(app.getHttpServer())
      305 |         .get('/api/kanban/board')
    > 306 |         .expect(200);
          |          ^
      307 |
      308 |       // Check that columns have WIP limits defined
      309 |       const inProgressColumn = response.body.columns.find((c: any) => c.id === 'in_progress');

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:306:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban drag-and-drop workflow ‚Ä∫ should handle blocked status correctly

    expected 200 "OK", got 404 "Not Found"

      319 |         .put(`/api/steps/${stepId}/status`)
      320 |         .send({ status: 'blocked' })
    > 321 |         .expect(200);
          |          ^
      322 |
      323 |       // Get kanban board
      324 |       const response = await request(app.getHttpServer())

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:321:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban with multiple users ‚Ä∫ should show assignee names correctly

    expected 200 "OK", got 404 "Not Found"

      338 |       const response = await request(app.getHttpServer())
      339 |         .get('/api/kanban/board')
    > 340 |         .expect(200);
          |          ^
      341 |
      342 |       // Find items with assignees
      343 |       const itemsWithAssignees: any[] = [];

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:340:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)

  ‚óè KanbanController Integration Tests - Kanban Operations ‚Ä∫ Kanban with multiple users ‚Ä∫ should support filtering by multiple assignees

    expected 200 "OK", got 404 "Not Found"

      374 |       const response = await request(app.getHttpServer())
      375 |         .get(`/api/kanban/board?assigneeId=${anotherUser.id}`)
    > 376 |         .expect(200);
          |          ^
      377 |
      378 |       // Verify filtering works
      379 |       let foundCount = 0;

      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:376:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:309:14)
      at ../node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:342:13)
      at Test.assert (../node_modules/supertest/lib/test.js:195:23)
      at localAssert (../node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (../node_modules/supertest/lib/test.js:152:11)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/kanban/kanban.controller.integration.spec.ts:147:34

      144 await prisma.user.deleteMany({
      145   where: { email: { startsWith: 'test.kanban.' } }
      146 });
    ‚Üí 147 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      145 |       where: { email: { startsWith: 'test.kanban.' } }
      146 |     });
    > 147 |     await prisma.processTemplate.deleteMany({
          |     ^
      148 |       where: { name: { startsWith: 'TEST_KANBAN_TEMPLATE' } }
      149 |     });
      150 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/kanban/kanban.controller.integration.spec.ts:147:5)

FAIL interfaces/controllers/step/step.controller.integration.spec.ts (149.571 s)
  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should assign a user to a step

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should unassign a user from a step

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should fail with invalid step ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should fail with invalid assignee ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ PUT /steps/:id/assignee ‚Ä∫ should fail when step is locked

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ Assignee workflow integration ‚Ä∫ should handle complete assignee workflow

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)

  ‚óè StepController Integration Tests - Assignee Flow ‚Ä∫ Assignee workflow integration ‚Ä∫ should support reassignment

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:35:34

      32 await prisma.user.deleteMany({
      33   where: { email: { startsWith: 'test.assignee.' } }
      34 });
    ‚Üí 35 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      33 |       where: { email: { startsWith: 'test.assignee.' } }
      34 |     });
    > 35 |     await prisma.processTemplate.deleteMany({
         |     ^
      36 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      37 |     });
      38 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:35:5)


  ‚óè Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.processTemplate.deleteMany()` invocation in
    /mnt/c/work/git2/process-todo/api/src/interfaces/controllers/step/step.controller.integration.spec.ts:123:34

      120 await prisma.user.deleteMany({
      121   where: { email: { startsWith: 'test.' } }
      122 });
    ‚Üí 123 await prisma.processTemplate.deleteMany(
    Foreign key constraint violated on the constraint: `step_templates_process_id_fkey`

      121 |       where: { email: { startsWith: 'test.' } }
      122 |     });
    > 123 |     await prisma.processTemplate.deleteMany({
          |     ^
      124 |       where: { name: { startsWith: 'TEST_TEMPLATE_' } }
      125 |     });
      126 |

      at ri.handleRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13)
      at ri.handleAndLogRequestError (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ri.request (../node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at l (../node_modules/@prisma/client/src/runtime/getPrismaClient.ts:862:24)
      at Object.<anonymous> (interfaces/controllers/step/step.controller.integration.spec.ts:123:5)


Test Suites: 9 failed, 13 passed, 22 total
Tests:       39 failed, 144 passed, 183 total
Snapshots:   0 total
Time:        156.059 s
Ran all test suites.
